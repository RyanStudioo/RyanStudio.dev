<link rel="stylesheet" href="/src/shared/css/headers.css" />
<script src="https://cdn.jsdelivr.net/npm/fuse.js@7.1.0"></script>
<script src="/src/shared/js/searchbar.js" type="module"></script>

<script src="https://kit.fontawesome.com/e13cddd840.js" crossorigin="anonymous"></script>


<nav class="nav-bar">
  <img src="/src/images/icons/icon.png" alt="Logo" class="logo" />
      <a href="">
        <strong>RyanStudio.dev</strong>
      </a>
  <ul class="nav-links" id="nav-links">
    <li class="image-text-container">
    </li>
    <li>
      <a href="/projects">
        Projects
      </a>
    </li>
  </ul>


  <div class="search-bar">
    <div class="search-bar-results">
    <input type="text" id="search-bar" placeholder="Search RyanStudio.dev..." >
    <ul id="search-results">
    </ul>
    </div>
    <script type="module">
      import {debounce, initSearch, searchResults} from "/src/shared/js/searchbar.js"

      await initSearch()

      const searchBar = document.getElementById("search-bar")
      const searchResultsList = document.getElementById("search-results")
      const inputHandling = debounce(() => {
        const query = searchBar.value.trim()
        const results = query ? searchResults(query) : [];
        let formattedResults = results.slice(0,3).map(result => `
        <a href="${result.href}">
          <div>
            <h1>${result.title}</h1>
            <p>${result.description}</p>
          </div>
        </a>`).join('')
        console.log(formattedResults)
        console.log(results)
        searchResultsList.innerHTML = formattedResults;
      })

      searchBar.addEventListener("input", inputHandling)
    </script>
  </div>

  <div class="float-right">
  <!-- From Uiverse.io by JustCode14 --> 
  <label class="switch">
    <input id="theme-checkbox" type="checkbox" onchange="toggleTheme()"/>
    <span class="slider">
      <div class="star star_1"></div>
      <div class="star star_2"></div>
      <div class="star star_3"></div>
      <svg viewBox="0 0 16 16" class="cloud_1 cloud">
      <path
        transform="matrix(.77976 0 0 .78395-299.99-418.63)"
        fill="#fff"
        d="m391.84 540.91c-.421-.329-.949-.524-1.523-.524-1.351 0-2.451 1.084-2.485 2.435-1.395.526-2.388 1.88-2.388 3.466 0 1.874 1.385 3.423 3.182 3.667v.034h12.73v-.006c1.775-.104 3.182-1.584 3.182-3.395 0-1.747-1.309-3.186-2.994-3.379.007-.106.011-.214.011-.322 0-2.707-2.271-4.901-5.072-4.901-2.073 0-3.856 1.202-4.643 2.925"
      ></path>
      </svg>
    </span>
  </label>
  </div>
  <div class="brand-icon-container">
    <a href="https://discord.ryanstudio.dev" target="_blank" aria-label="Join our Discord">
      <img src="src\images\icons\Discord-Symbol-Black.svg" alt="Discord Logo" class="brand-logo" style="height: 30px"/>
    </a>
    <a href="https://github.ryanstudio.dev" target="_blank" aria-label="Visit our GitHub">
      <img src="src\images\icons\GitHub_Invertocat_Dark.svg" alt="GitHub Logo" class="brand-logo"/>
    </a>
    <a href="https://youtube.ryanstudio.dev" target="_blank" aria-label="Visit our YouTube">
      <img src="src\images\icons\youtube-play-button-play-video-youtube-logo-svgrepo-com.svg" alt="YouTube Logo" class="brand-logo" />
    </a>
  </div>
  <div class="hamburger" aria-hidden="false">
      <div class="hamburger-wrapper">
        <button id="hamburger" class="hamburger-btn" aria-label="Open menu" aria-expanded="false" aria-controls="menuDropdown">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </button>

        <!-- dropdown placed inside wrapper so it anchors to the button -->
        <div class="dropdown-wrapper">
          <nav class="dropdown" id="menuDropdown" role="menu" aria-hidden="true">
            <ul>
              <a href="/projects/" role="menuitem" tabindex="-1"><li>Projects</li></a>
            </ul>
          </nav>
        </div>
      </div>
    </div>

</nav>
